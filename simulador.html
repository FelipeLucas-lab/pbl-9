<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Produtividade - AgroInteligente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Estilos compartilhados do site -->
  <link rel="stylesheet" href="header.css">
  <link rel="stylesheet" href="footer.css">
  <link rel="stylesheet" href="simulador.css">
</head>
<body>
  <!-- Header -->
  <header>
    <div class="banner-content">
      <h1>Simulador de Produtividade</h1>
      <p>Veja como fatores monitorados por sensores IoT impactam a produtividade agrÃ­cola.</p>
    </div>
  </header>

  <!-- ... (HEAD, HEADER e FOOTER iguais ao seu padrÃ£o, css igual, sÃ³ o MAIN muda) -->
<main>
  <section class="simulador-section">
    <form id="simuladorForm" class="simulador-form">
      <h2>Insira os dados dos sensores:</h2>
      <label>
        Umidade do Solo (%):
        <input type="number" name="umidade" min="0" max="100" required>
      </label>
      <label>
        Temperatura Ambiente (Â°C):
        <input type="number" name="temperatura" min="0" max="60" required>
      </label>
      <label>
        NÃ­vel de Nutrientes (mg/kg):
        <input type="number" name="nutrientes" min="0" max="200" required>
      </label>
      <label>
        IncidÃªncia de Pragas (por mÂ²):
        <input type="number" name="pragas" min="0" max="20" required>
      </label>
      <label>
        Luminosidade (lux):
        <input type="number" name="luz" min="0" max="10000" required>
      </label>
      <button type="submit">Simular</button>
    </form>

    <div id="resultadoSimulador" class="simulador-resultado" style="display:none;"></div>
  </section>
</main>

<script>
function avaliarFator(valor, bom, medio, labels) {
  if (valor >= bom[0] && valor <= bom[1]) return {status: 'bom', emoji: 'ðŸŸ¢', texto: labels.bom};
  if (valor >= medio[0] && valor <= medio[1]) return {status: 'medio', emoji: 'ðŸŸ¡', texto: labels.medio};
  return {status: 'ruim', emoji: 'ðŸ”´', texto: labels.ruim};
}

document.getElementById('simuladorForm').onsubmit = function(e) {
  e.preventDefault();
  const dados = Object.fromEntries(new FormData(this));

  // AvaliaÃ§Ãµes individuais
  const fatores = [
    {
      nome: 'Umidade do Solo',
      valor: Number(dados.umidade),
      unidade: '%',
      avaliacao: avaliarFator(Number(dados.umidade), [60,80], [40,59], {
        bom: 'Solo bem irrigado, ideal para as plantas.',
        medio: 'Solo precisando de atenÃ§Ã£o para irrigaÃ§Ã£o.',
        ruim: 'Umidade inadequada. Risco de estresse hÃ­drico.'
      })
    },
    {
      nome: 'Temperatura Ambiente',
      valor: Number(dados.temperatura),
      unidade: 'Â°C',
      avaliacao: avaliarFator(Number(dados.temperatura), [20,28], [29,33], {
        bom: 'Temperatura ideal para cultivo.',
        medio: 'Temperatura elevada, monitorar.',
        ruim: 'Temperatura fora do ideal. Pode prejudicar a lavoura.'
      })
    },
    {
      nome: 'NÃ­vel de Nutrientes',
      valor: Number(dados.nutrientes),
      unidade: 'mg/kg',
      avaliacao: avaliarFator(Number(dados.nutrientes), [70,120], [60,69], {
        bom: 'NÃ­veis de nutrientes Ã³timos.',
        medio: 'NÃ­veis de nutrientes abaixo do ideal.',
        ruim: 'DeficiÃªncia nutricional. Recomenda-se adubaÃ§Ã£o.'
      })
    },
    {
      nome: 'IncidÃªncia de Pragas',
      valor: Number(dados.pragas),
      unidade: 'por mÂ²',
      avaliacao: avaliarFator(Number(dados.pragas), [0,2], [3,5], {
        bom: 'Controle de pragas eficiente.',
        medio: 'AtenÃ§Ã£o: presenÃ§a de pragas moderada.',
        ruim: 'Alto Ã­ndice de pragas. Adote controle imediato.'
      })
    },
    {
      nome: 'Luminosidade',
      valor: Number(dados.luz),
      unidade: 'lux',
      avaliacao: avaliarFator(Number(dados.luz), [5000,8000], [3500,4999], {
        bom: 'Luminosidade adequada.',
        medio: 'Luminosidade abaixo do ideal.',
        ruim: 'Luminosidade insuficiente. Avaliar sombreamento.'
      })
    }
  ];

  // Nota geral simples (peso igual)
  let nota = 0, recomendacoes = [];
  fatores.forEach(f => {
    if(f.avaliacao.status==="bom") nota += 2;
    else if(f.avaliacao.status==="medio") {nota += 1; recomendacoes.push(f.nome);}
    else recomendacoes.push(f.nome);
  });
  const notaFinal = (nota / (fatores.length*2) * 10).toFixed(1);

  // SugestÃ£o
  let resumo = '';
  if (notaFinal >= 8) resumo = 'Excelente produtividade!';
  else if (notaFinal >= 6) resumo = 'Produtividade razoÃ¡vel. Melhorar: ' + recomendacoes.join(', ');
  else resumo = 'Produtividade baixa. AtenÃ§Ã£o extra a: ' + recomendacoes.join(', ');

  // Montar HTML de resultado
  let html = `<h2>Resultados da SimulaÃ§Ã£o</h2>`;
  fatores.forEach(f => {
    html += `
      <div class="fator-row">
        <div class="fator-nome">${f.nome}</div>
        <div class="fator-valor">${f.valor} ${f.unidade} <span class="fator-status ${f.avaliacao.status}">${f.avaliacao.emoji} ${f.avaliacao.status.charAt(0).toUpperCase() + f.avaliacao.status.slice(1)}</span></div>
        <div class="fator-comentario">${f.avaliacao.texto}</div>
      </div>
    `;
  });
  html += `
    <div class="simulador-resumo">
      <div class="nota-geral">
        <span class="nota-label">Nota Geral:</span>
        <span class="nota-valor ${notaFinal>=8?'bom':notaFinal>=6?'medio':'ruim'}">${notaFinal}</span>
      </div>
      <div class="resumo-recomendacao">
        <span>ðŸ”Ž <strong>Resumo:</strong> ${resumo}</span>
      </div>
    </div>
  `;

  const resultDiv = document.getElementById('resultadoSimulador');
  resultDiv.innerHTML = html;
  resultDiv.style.display = 'block';
  resultDiv.scrollIntoView({behavior: "smooth"});
};
</script>

  <!-- Footer -->
  <footer class="site-footer">
  <div class="footer-container">
    <nav class="footer-nav">
      <a href="index.html">Home</a>
      <a href="simulador.html">Simulador</a>
      <a href="sobre.html">Sobre NÃ³s</a>
      <a href="contato.html">Fale Conosco</a>
    </nav>
    <div class="footer-location-logo">
      <span class="footer-location">
        VocÃª estÃ¡ em: <strong id="footerPageName">Tecnologia no Campo</strong>
      </span>
      
    </div>
    <div class="footer-copy">
      Â© 2025 AgroInteligente. Todos os direitos reservados.
    </div>
  </div>
</footer>
<script>
  // Atualizar localizaÃ§Ã£o no footer
  const pageNames = {
    "index.html": "Home",
    "simulador.html": "Simulador",
    "sobre.html": "Sobre NÃ³s",
    "tecnologia.html": "Tecnologia no Campo",
    "contato.html": "Fale Conosco"
  };
  let path = window.location.pathname.split('/').pop();
  if (!path || path === "") path = "tecnologia.html";
  let pageName = pageNames[path] || document.title || "Tecnologia no Campo";
  document.getElementById("footerPageName").textContent = pageName;
</script>
</body>
</html>